<!DOCTYPE html>

<html>
<head lang="en">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <title>My First Needful Presentation</title>
    <style>
        /* Some convenient global styling variables, modify and add to as necessary. Please note that all variable names need
to be defined under :root, are preceded by -- and are case sensitive.*/
:root{
    --main-background-color: white;

    --main-font-family: 'Inter', sans-serif;
    --main-font-color: black;

    --slide-margin-left: 3.5%;
    --slide-margin-right: 3.5%;
    --slide-margin-top: 1.5%;
    --slide-margin-bottom: 2.5%;

    --slide-title-position: left; /* left, center, or right */
    --slide-number-position: left; /* left, center, or right */

}

/* Do some font stuff first. */

/* Google font import: 'Inter' by Rasmus Andersson: https://fonts.google.com/specimen/Inter*/
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

/* Increase weight of bold text - to this end, update font-weight property of <strong> HTML tag. */
strong {
    font-weight: 600;
}

html, body {
    background: var(--main-background-color);
    font-family: var(--main-font-family);
    font-weight: 300;
    color: var(--main-font-color);
}

#slide-title {
    font-size: 4em;
    font-weight: 500;
    text-align: var(--slide-title-position);
    padding-left: var(--slide-margin-left);
    padding-right: var(--slide-margin-right);
    padding-top: var(--slide-margin-top);
}

#slide-content {

}

.textbox {
    font-size: 1.7em;
    line-height: 1.3;
}

#slide-number {
    font-size: 1.7em;
}

/*** Slide navigation and controls ***/

.slide-control {
    font-weight: bold;
    font-size: 18px;
    transition: 0.6s ease;
}

/* Rounded borders for prev/next controls */
.slide-control.prev {
    border-radius: 0 4px 4px 0;
}

.slide-control.next {
    border-radius: 4px 0 0 4px;
}

/* Add a bit of hover effect to the slide controls */
.slide-control.prev:hover, .slide-control.next:hover {
    background-color: rgba(0,0,0,0.3);
}

/* The navigation menu that appears when hovering over the page number */
#nav-menu-content {
    background-color: var(--main-background-color);
    border-style: solid;
    border-width: 1px;
    border-color: #626262;
    border-radius: 2px;
}

#fullscreen-link {
    font-weight: 500;
    font-size: 0.9em;
}




body {
    font-size: 100%;
}

/*\ Slide container and content \*/

#slide-container {
    max-width: 99%;
    position: absolute;
    display: block;
    width: 99%;
    height: 99%;
    margin: auto;
}

#slide-content {
    position: relative;
    margin-left: var(--slide-margin-left);
    margin-right: var(--slide-margin-right);
    margin-bottom: var(--slide-margin-bottom);
    display: grid;
    max-height: 90vh;
    column-gap: 20px;
    row-gap: 5px;
}

/*\ Slide number, navigation menu and footer \*/

footer {
    position: fixed;
    left: 0;
    bottom: 0;
    display: block;
    width: 100%;
}

#nav-menu {
    padding-left: var(--slide-margin-left);
    padding-right: var(--slide-margin-right);
    padding-bottom: var(--slide-margin-bottom);
    text-align: var(--slide-number-position);
}

#nav-menu-content {
    display: none;
    position: fixed;
    z-index: 100;
    bottom: 60px;
    padding: 10px;
}

#nav-menu-content.right {
    right: 20px;
}

#nav-menu-content a:hover {
    text-decoration: underline;
    cursor: pointer;
}

#slide-number {
    cursor: pointer;
    display: inline-block;
    padding: 10px;
}

/*\ Slide controllers - forward and back controls \*/

.slide-control {
    cursor: pointer;
    position: absolute;
    top: 50%;
    width: auto;
    padding: 16px;
    margin-top: -22px;
    user-select: none;
    z-index: 100;
    text-decoration: none;
}

.slide-control.next {
    /* Position the "next button" to the right. */
    right: 0;
}    </style>
</head>

<body onresize="scaleContent()">
    <div id="slide-container">
        <a class="slide-control prev" id="prev-slide-ctrl" onclick="advanceSlides(-1)">&#10094;</a>
        <header>
            <div id="slide-title"></div>
        </header>
        <div id="slide-content">
        </div>
        <a class="slide-control next" id="next-slide-ctrl" onclick="advanceSlides(1)">&#10095;</a>
    </div>

    <footer>
        <div id="nav-menu">
            <span id="slide-number"></span>
            <div id="nav-menu-content">
            <a onclick="jumpToSlide('fd47d9ffb2')">This is Slide #1</a><br>
            <a onclick="jumpToSlide('54a49076bf')">Welcome to Slide #2</a><br>
            <br>
            <span id="fullscreen-link"><a onclick="toggleFullScreen()">Enter/Exit Fullscreen</a></span>
            </div>
        </div>
    </footer>


    <!-- Begin the needful presentation JavaScript -->
    <script type="text/javascript">

var needfulConfig = {
    "pageNumbers" : true
}

// Define globals first:
var slideData = [
    {
        "id" : "fd47d9ffb2",
        "title" : "This is Slide #1",
        "theme_id" : null,
        "html" : `<div style="grid-column : 1 / 2; grid-row : 1 / 2;" class="textbox"><p>Here are some bullet points for Slide #1:</p>
<ul>
<li>Bullet 1.</li>
<li>Bullet 2.<ul>
<li><em>Bullet 2a</em></li>
<li><em>Bullet 2b</em></li>
</ul>
</li>
<li>And so on...</li>
</ul>
<p><strong>...you get the idea.</strong></p></div>`,
        "layout" : "grid-template-columns: repeat(1, 1fr)",
        "plotly" : function plot() {
            return
        },
        "purge" : function purge() {
            return
        },
        "pageNumber" : needfulConfig.pageNumbers,
        "disable_mathjax" : false
    } ,    {
        "id" : "54a49076bf",
        "title" : "Welcome to Slide #2",
        "theme_id" : null,
        "html" : `<div style="grid-column : 1 / 2; grid-row : 1 / 2;" class="textbox"><p>Now for some <a href="https://www.lipsum.com/">Lorem Ipsum</a>:</p>
<p><br>
<center>
<em>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus placerat mauris ut mattis hendrerit.
Proin ornare leo tortor, a iaculis nisi eleifend quis. Proin feugiat elit vitae dolor faucibus vestibulum.
Curabitur tempus placerat lacus sit amet feugiat. Sed vel sodales neque. Phasellus in tempus neque.
Maecenas auctor turpis vel ex bibendum dapibus. Aliquam ac ex eget neque convallis interdum. Etiam maximus suscipit magna,
a porttitor turpis sagittis a. Phasellus sodales vitae elit non porttitor. Aliquam condimentum felis a dictum porta.
In blandit, eros vitae facilisis condimentum, dolor leo luctus enim, et semper nibh nunc sed tellus.</em>
</center></p></div>`,
        "layout" : "grid-template-columns: repeat(1, 1fr)",
        "plotly" : function plot() {
            return
        },
        "purge" : function purge() {
            return
        },
        "pageNumber" : needfulConfig.pageNumbers,
        "disable_mathjax" : false
    } ];

var slideIndex = 0;
var maxIndex = slideData.length - 1;

// Map slide IDs to their position in the slideData array.
var slideIDToIndex = {};
for (var i = 0; i <= maxIndex; i++){
  var slideID = slideData[i].id;
  slideIDToIndex[slideID] = i;
}

// Create a dictionary containing CSS theme IDs and their variables.
var cssThemes = {

}

// This is stupid, but for themes to work properly we need to extract all CSS :root variables
// and store them.
var initialCSS = Array.from(document.styleSheets).map( (style) => Array.from(style.cssRules) ).flat();

// Filter for :root, extract variables and their values, store in array under def
var cssRootStyle = initialCSS.filter( (sel) => sel.selectorText == ":root" );
if (cssRootStyle.length > 0){
    cssRootStyle = cssRootStyle[0].style;
    var cssVarNames = Array.from(cssRootStyle).filter( (name) => name.startsWith("--") );

    // Create list of --name, value pairs, assign to "default" in cssThemes.
    cssThemes["default"] = cssVarNames.map( (name) => [name, cssRootStyle.getPropertyValue(name)] );
}
else
{
    cssThemes["default"] = [];
}

// Define functions:

function showSlide(slide) {
    // As implied, display the given slide.

    // Clear existing title, replace with new one.
    var titleSpan = $("#slide-title");
    titleSpan.empty();
    titleSpan.append(slide.title);

    // Clear existing content.
    var slideContent = $("#slide-content");
    slideContent.empty();

    // Update CSS grid layout/number of columns.
    slideContent.attr("style", slide.layout);

    // Apply default CSS theme before we show anything.
    cssThemes.default.forEach( ([name, val]) => cssRootStyle.setProperty(name, val) );

    // Apply slide's CSS theme, if one is set.
    if (slide.theme_id != null & cssThemes.default.length > 0) {
        cssThemes[slide.theme_id].forEach( ([name, val]) => cssRootStyle.setProperty(name, val) );
    }

    // Shove in new slide's HTML content, call plotting function.
    slideContent.append(slide.html);
    slide.plotly();

    // Update slide number.
    var slideNumber = $("#slide-number");
    slideNumber.empty();
    if (slide.pageNumber){
        slideNumber.append(slideIndex + 1);
    }

    // Typeset any maths that may be present.
    if (typeof MathJax !== "undefined" & !slide.disable_mathjax) {
      MathJax.typeset();
    }

    // Update content scaling if necessary. Note: if there's issues, this call
    // may be moved to some page ready event.
    scaleContent();
}

function scaleContent(){
    // Update content scaling if we need to fit everything to screen.
    // Get height of the viewport and slide-content div. If the div height exceeds that
    // of the viewport, scale the height proportionally.
    var slideContent = $("#slide-content");
    var windowHeight = $(window).height() - slideContent[0].offsetTop;
    var contentHeight = slideContent[0].scrollHeight

    if (contentHeight > windowHeight){
        var scaleY = (windowHeight / contentHeight).toFixed(2);
        var re = new RegExp("; transform: scale\(.*\); transform-origin: 0 0")
        var style = slideContent.attr("style");
        style = style.replace(re, "")
        var scaleTransform = "; transform: scale(1, " + scaleY + "); transform-origin: 0 0"
        style += scaleTransform
        slideContent.attr("style", style);
    }

}

function advanceSlides(n){
    // Advance the presentation by n slides.

    // Sanity check:
    if (slideIndex + n < 0 || slideIndex + n > maxIndex) { return }

    // Clear the current slide and display the new one:
    slideData[slideIndex].purge();
    showSlide(slideData[slideIndex += n])

    // Control visibility of slide controls.
    $("#prev-slide-ctrl").show();
    $("#next-slide-ctrl").show();

    if (slideIndex == maxIndex) {
        $("#next-slide-ctrl").hide();
    }
    if (slideIndex == 0) {
        $("#prev-slide-ctrl").hide();
    }
}

function jumpToSlide(slideID){
    // Map slideID to index in slideData:
    var idx = slideIDToIndex[slideID];

    // Use advanceSlides(n) to jump to slide we need.
    var delta = idx - slideIndex;
    if (delta == 0){
        return;
    }
    else {
        advanceSlides(delta);
    }
}

function showNavMenu() {
    // Get position of page number - left, right or centre.
    var slideNumPos = window.getComputedStyle(document.body).getPropertyValue("--slide-number-position");
    var navMenu = $("#nav-menu-content");

    if (slideNumPos.trim() == "right"){
        navMenu.attr("class", "right");
    }
    navMenu.css("display", "inline-block");
}

function toggleFullScreen() {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen();
  } else {
    if (document.exitFullscreen) {
      document.exitFullscreen();
    }
  }
}

$(document).ready( function() {
    // Show the first slide!
    showSlide(slideData[0]);

    // Hide previous-slide control as we're on the first page.
    $("#prev-slide-ctrl").hide();
    // Also hide next control if there's only one slide.
    if (maxIndex == 0){
        $("#next-slide-ctrl").hide();
    }

    // Add left/right arrow key navigation.
    $(document).keydown( function(e) {
        // left
        if (e.which == 37){
            advanceSlides(-1);
        }
        // right
        else if (e.which == 39){
            advanceSlides(1);
        }
    });
});



// Display the hidden navigation menu when the user hovers over the page number.
$("#slide-number").hover(
    showNavMenu, // on hover
    function(){ $("#nav-menu-content").css("display", "none"); }, // unhover
);
// Similarly, this will maintain hover until the user moves away from the menu.
$("#nav-menu-content").hover(
    showNavMenu, // on hover
    function(){ $("#nav-menu-content").css("display", "none"); }, // unhover
);    </script>
</body>

</html>